{#
   This is the base template used as the application layout which contains the
   common elements and decorates all the other templates.
   See https://symfony.com/doc/current/templates.html#template-inheritance-and-layouts
#}
<!DOCTYPE html>
<html lang="{{ app.locale }}" data-locale="{{ app.locale }}">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta name="view-transition" content="same-origin"/>
		<title>
			{% block title %}Symfony Demo application
			{% endblock %}
		</title>
		<link
		rel="alternate" type="application/rss+xml" title="{{ 'rss.title'|trans }}" href="{{ path('blog_rss') }}">

		{#
																						            Those two blocks defines frontend entrypoint for CSS and JavaScript assets
																						            See https://symfony.com/doc/current/frontend.html
																						        #}
		{% block stylesheets %}
			<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"/>
			<link rel="stylesheet" href="{{ asset('styles/form.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/dragndrop.css') }}">
		{% endblock %}
		{% block javascripts %}
			{% block importmap %}
				{{ importmap('app') }}
			{% endblock %}
			<script>
				window.locale = '{{ app.locale }}';
			</script>
			<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
			<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
		{% endblock %}
		<link rel="shortcut icon" type="image/svg+xml" href="{{ asset('favicon.svg') }}">
	</head>

	<body id="{% block body_id %}{% endblock %}">

		{% block header %}
			{% set _route = app.current_route %}
			<header>
				<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
					<div class="container">
						<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#appNavbar" aria-controls="appNavbar" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>

						<div class="navbar-collapse collapse" id="appNavbar">
							<ul class="navbar-nav ml-auto">
								{% block header_navigation_links %}
									<li class="nav-item{{ _route starts with 'template' ? ' active' : '' }}">
										<a class="nav-link" href="{{ path('template_list') }}">
											<twig:ux:icon name="tabler:database"/>
											Szablony
										</a>
									</li>
									<li class="nav-item{{ _route == 'entry_list' ? ' active' : '' }}">
										<a class="nav-link" href="{{ path('entry_list') }}">
											<twig:ux:icon name="tabler:list-details"/>
											Wpisy
										</a>
									</li>
								{% endblock %}


								{% if app.user %}
									<li class="nav-item dropdown">
										<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" id="user">
											<twig:ux:icon name="tabler:user"/>
											<span class="caret"></span>
											<span class="sr-only">{{ app.user.fullname }}</span>
										</a>
										<div class="dropdown-menu user" role="menu" aria-labelledby="user">
											<a class="dropdown-item" href="{{ path('user_edit') }}">
												<twig:ux:icon name="tabler:id-badge-2"/>
												{{ 'menu.user'|trans }}
											</a>
											<div class="dropdown-divider"></div>
											<a class="dropdown-item" href="{{ logout_path() }}">
												<twig:ux:icon name="tabler:logout"/>
												{{ 'menu.logout'|trans }}
											</a>
										</div>
									</li>
								{% endif %}
							</ul>
						</div>
					</div>
				</nav>
			</header>
		{% endblock %}

		<div
			class="container body-container">
			{# Flash messages block #}
			<div class="row">
				<div class="col-12">
					{% block flash_messages %}
						{% set labelToClass = {
    						'success': 'alert-success',
    						'error': 'alert-danger',
    						'warning': 'alert-warning',
    						'info': 'alert-info'
						} %}
						{% for label, messages in app.flashes %}
							{% set alertClass = labelToClass[label] ?? 'alert-info' %}
							{% for message in messages %}
								<div class="alert alert-dismissible d-flex justify-content-between align-items-center p-2 {{ alertClass }} fade show" role="alert">
									{{ message|raw }}
									<button type="button" class="close btn btn-{{alertClass}}'" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
							{% endfor %}
						{% endfor %}


					{% endblock %}
				</div>
			</div>
			{% block page_header %}
				{% if header_title is defined %}
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h1>{{ header_title }}</h1>
						<a href="{{ header_back_link }}">{{header_back_link_title}}</a>
					</div>
				{% endif %}
			{% endblock %}


			{% block body %}
				<div class="row">
					<div id="main" class="col-sm-9">
						{% block main %}{% endblock %}
					</div>

					<div id="sidebar" class="col-sm-3">
						{% block sidebar %}
							{{ render_esi(controller('Symfony\\Bundle\\FrameworkBundle\\Controller\\TemplateController::templateAction', {
                                'template': 'blog/about.html.twig',
                                'sharedAge': 600,
                                '_locale': app.locale
                            })) }}
						{% endblock %}
					</div>
				</div>
			{% endblock %}
		</div>

		{% block footer %}
			<footer>
				<div class="container">
					<div class="row">
						<div id="footer-copyright" class="col-12">
							<p>&copy;
								{{ 'now'|date('Y') }}
								- ≈Åukasz Makowski
							</p>
						</div>
					</div>
				</div>
			</footer>
		{% endblock %}
	</body>
</html>

